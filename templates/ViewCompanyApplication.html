<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>View / Manage Job Application</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/companyApplicationTable.css')}}" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css')}}" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

	<nav>
		<div class="homeNav">
			<a href="/"></a>
		</div>
		<div class="otherNav">
			<div class="dropdown">
				<a class="dropdown-button" onclick="toggleDropdown()">Job</a>
				<div id="dropdownOptions" class="dropdown-content">
					<a href="/publish_job">Create New</a>
					<a href="/companyViewManageJob">View / Manage</a>
				</div>
			</div>
			<a href="#">View / Manage Application</a>
			<a href="/manage_company_profile">Edit Profile/ Account</a>
			<a href="/logoutCompany">Logout</a>
		</div>
	</nav>
</head>

<body>
	<div class="logedIn">
		<i class="fas fa-user-circle"></i>
		<label>
			{{name}}
		</label>
	</div>

	<form action="/addCompanyReg" autocomplete="on" method="POST" enctype="multipart/form-data">
		<div class="h1" style="margin-left: 0px;">
			<h1>
				Job Application
			</h1>
		</div>

		<div class="filterStatus">
			<label for="status">Filter by Status:</label>
			<select name="status" id="status" style="margin-right: 10px;">
				<option value="">All</option>
				<option value="pending">Pending</option>
				<option value="accepted">Accepted</option>
				<option value="rejected">Rejected</option>
			</select>
			<input type="submit" value="Apply Filter">
		</div>

		<fieldset>
			<div class="container">
				<table class="jobDisplay-table">
					<thead>
						<tr class="jobDisplay-head">
							<td style="width: 50px;">num.</td>
							<td>Job Application Date</td>
							<td>Applied Job</td>
							<td colspan="4">Student</td>
							<td>Resume</td>
							<td>Status</td>
							<td>Action</td>
						</tr>
					</thead>

					<tbody class="jobDisplay-body">
						{% if applicationData %}
						{% for application in applicationData %}
						<tr>
							<td style="width: 50px;">{{ loop.index }}</td>
							<td>
								{{ application.application_datetime }}
							</td>
							<td>
								{{application.jobPosition}} <br />
								{{application.jobType}}
							</td>
							<td>{{ application.stud_id }}</td>
							<td>{{ application.stud_name}} <br /> {{
								application.stud_gender}} </td>
							<td>{{ application.stud_phone }}</td>
							<td>{{ application.stud_cohort}}</td>
							<td><a href="#" value="view resume">View Resume</a></td>
							<td>{{ application.application_status}}</td>
							<td>
								<form action="/compApproveJobApp" autocomplete="on" method="POST"
									enctype="multipart/form-data">
									<button class="approveBtn" type="submit" name="approve_btn" value="{{ application.application_id }}"
										{% if application.application_status !="pending" %}disabled{% endif
										%}>Approve</button>
								</form>
								<br />
								<form action="/compRejectJobApp" autocomplete="on" method="POST"
									enctype="multipart/form-data">
									<button class="rejectBtn" type="submit" name="reject_btn" value="{{ application.application_id }}" {%
										if application.application_status !="pending" %}disabled{% endif
										%}>Reject</button>
								</form>
							</td>
						</tr>
						{% endfor %}
						{% else %}
						<tr>
							<td colspan="8" style="text-align: center;">No job application found</td>
						</tr>
						{% endif %}
					</tbody>
				</table>
			</div>

		</fieldset>
	</form>

	<script src="{{ url_for('static', filename='script/master.js') }}"></script>
</body>


</html>